-- $ProjectHeader: use 0.393 Wed, 16 May 2007 14:10:28 +0200 opti $

model ER


-- enumerations

enum TipoRespuestaAviso {Aceptar,Descartar,Posponer}
enum Composicion {Pastillas,Pomada,Inyeccion,Jarabe,Dosis,Gotas}
enum DiaSemana {Lunes,Martes,Miercoles,Jueves,Viernes,Sabado,Domingo}
enum CondicionesEspeciales {Hour,Periodo,Despertar,Comer,Deporte}
enum AtributoFisico {Temperatura,Presion,Peso}
enum ModoAlarma {SoloVibracion,SoloSonido,SonidoYVibracion,EnSilencio}

--  aux classes
class Image
end

class Banner
end

class Date
attributes
  dia : Integer
  Mes : Integer
  Ano : Integer
end

class Hour
attributes
  hour : Integer
  minute : Integer
  seconds : Integer
end 

-- classes
class Usuario
attributes
  nombre : String
  email : String
  contrassena : String
  ultimaActualizacion : Date
end

class Paciente < Usuario
end

class Administrador < Usuario
end

class Supervisor < Usuario
end

associationclass Configuracion 
between
  Usuario[1..*] role leSupervisa
  Supervisor[*] role supervisaA
attributes
  puedeVisualizarTratamiento : Boolean
  puedeVisualizarMedicamentosRestantes : Boolean
  puedeVisualizarVisitasMedicas : Boolean
  puedeVisualizarComentarios : Boolean
  puedeVisualizarDatosPersonales : Boolean
end

class Alergia
attributes
  nombre : String
  descripcion : String
end

class DatoFisico
attributes
  tipo : String
  dato : Real
end

class Comentario
attributes
  texto : String
  dia : Date
end

class Sintoma
attributes
  nombre : String
  descripcion : String
  dia : Date
end

class DiaDeRegistro
attributes
  fechaRegistro : Date
end

class Categoria
attributes
  nombre : String
end

class Anuncio
attributes
  identificador : Integer
  nombre : String
  fotografia : String
  banner : Banner
  enlace : String
end

class Medicamento
attributes
  identificador : Integer
  nombre : String
  infoProspecto : String
  fotografia : Image
  tipoComposicion : Composicion
end

class MedicamentoAdministradoAlPaciente
attributes
  identificador : Integer
  fotografia : String
  nombreMedico : String
  diasAdministracion : DiaSemana
  horaInicioAdministracion : Hour
  horaFinAdministracion : Hour
  cantidadAdministracion : Integer
  avisoNumeroFallos : Integer
  avisoCondicionesEspeciales : CondicionesEspeciales
  introduccionManual : Boolean
end

class Periodo
attributes
  fechaInicio : Date
  fechaFin : Date
end

class MedicamentoTratamientoFinalizado < MedicamentoAdministradoAlPaciente
end

class MedicamentoEnTratamiento < MedicamentoAdministradoAlPaciente
attributes
  cantidadRestante : Integer
end

class Aviso
attributes
  identificador : Integer
  fecha : Date
  hora : Hour
  haSidoAceptada : TipoRespuestaAviso
end

class AvisoAdministracionMedicamento < Aviso
attributes
  modoDeAlarma : ModoAlarma
  tiempoRepeticion : Integer
end

class AvisoMedicacionRestante < Aviso
attributes  
  modoDeAlarma : ModoAlarma
  tiempoRepeticion : Integer
end

class VisitaMedica
attributes
  hora : Hour
  lugar : String
  medico : String
  dia : Date
end

class AvisoVisitaMedica < Aviso
attributes
  modoDeAlarma : ModoAlarma
  tiempoRepeticion : Integer
end

class AvisoIncumplimiento < Aviso
attributes
  modoDeAlarma : ModoAlarma
  tiempoRepeticion : Integer
end

class AvisoEspecial < Aviso
attributes
  modoDeAlarma : ModoAlarma
  tiempoRepeticion : Integer
end

class PeticionSerSupervisor < Aviso
attributes
  haSidoRespondida : Boolean
end

-- associations

association PeticionDeSupervision between
  Paciente[*]
  Usuario[*]
end

association Administra between
  Administrador[1..*]
  Anuncio[*]
end

association seMuestraALosMedicamentosCon between
  Anuncio[*]
  Categoria[1..*]
end

association perteneceALa between
  Medicamento[*]
  Categoria[1..*]
end

association seAdministraDurante between
  MedicamentoAdministradoAlPaciente[1]
  Periodo[*]
end

association del between
  AvisoAdministracionMedicamento[*]
  MedicamentoEnTratamiento[1]
end

association delMedicamento between
  AvisoMedicacionRestante[*]
  MedicamentoEnTratamiento[1]
end

association de between
  AvisoVisitaMedica[*]
  VisitaMedica[1]
end

association porParteDe between
  AvisoIncumplimiento[*]
  Paciente[1]
end

association configuradoPor between
  AvisoEspecial[*]
  Paciente[1]
end

association sufre between
  Paciente[1]
  Sintoma[*]
end

association escribe between
  Paciente[1]
  Comentario[*]
end

association tieneProgramada between
  Paciente[1]
  VisitaMedica[*]
end

association seMide between
  Paciente[1]
  DatoFisico[*]
end

association padece between
  Paciente[1]
  Alergia[*]
end

association seRelacionaCon between
  Comentario[*]
  MedicamentoEnTratamiento[0..1]
end
